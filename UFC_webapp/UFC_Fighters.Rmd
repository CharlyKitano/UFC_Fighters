---
title: "UFC Fighters"
output:
 flexdashboard::flex_dashboard:
   orientation: columns
   vertical_layout: fill
runtime: shiny
---



```{r setup, echo=FALSE}
library(shiny)
library(scales)
library(shinydashboard)
library(DT)
data <- read.csv("C:/Users/HP/Documents/EMA cours/projet visu/Final_data.csv") 
# UI code
ui <- fluidPage(
  dashboardPage(
    dashboardHeader(title = "UFC"),
    dashboardSidebar(
      sidebarMenu(
        menuItem("General Info", tabName = "general_info"),
        menuItem("Comparison", tabName = "comparison")
      )
    ),
    dashboardBody(
      tabItems(
        tabItem(
          tabName = "general_info",
          fluidRow(
            box(
              title = "General Information",
              status = "primary",
              solidHeader = TRUE,
              collapsible = TRUE,
              fluidRow(
                column(6, textInput("country", "Country:", placeholder = "Enter country")),
                column(6, selectInput("fighting_style", "Fighting Style:",
                                      choices = c("KICKBOXER", "Wrestler", "JIU-JITSU"),
                                      selected = "KICKBOXER")
                )
              ),
              actionButton("get_results", "Get Results", class = "btn-primary")
            )
          ),
          fluidRow(
            column(12, DTOutput("placeholder_table"))
          )
        ),
        tabItem(
          tabName = "comparison",
          fluidRow(
            box(
              title = "Player Comparison",
              status = "warning",
              solidHeader = TRUE,
              collapsible = TRUE,
              fluidRow(
                column(6, textInput("player1", "Player 1:", placeholder = "Enter name")),
                column(6, textInput("player2", "Player 2:", placeholder = "Enter name"))
              ),
              actionButton("compare_players", "Compare Players", class = "btn-warning")
            ),
            box(
              title = "Player Info",
              status = "primary",
              solidHeader = TRUE,
              collapsible = TRUE,
              textInput("player_info", "Player Info:", placeholder = "Enter name"),
              actionButton("generate", "Generate Info")
            ),
            fluidRow(
              plotOutput("placeholder_plot", width = "100%")
            )
          )
        )
      )
    )
  )
)

# Server code
server <- function(input, output, session) {
  output$placeholder_table <- renderDT({
    data <- data.frame(
      Test = c("Test", "Test", "Test"),
      Age = c(30, 25, 35),
      Test = c("Test", "Test", "Test")
    )
    datatable(data)
  })
  output$placeholder_plot <- renderPlot({
    req(input$generate)  # Wait for the button to be clicked
    
    # Filter data based on the player's name
    player_data <- data[data$Name == input$player_info, ]
    columns_of_interest <- c("Sig..Str..By.Position...Standing", 
                             "Sig..Str..By.Position...Clinch", 
                             "Sig..Str..By.Position...Ground")
    pie_data <- player_data[, columns_of_interest]
    percentages <- colSums(pie_data) / sum(colSums(pie_data))
    labels <- paste(names(percentages), scales::percent(percentages))
    pie(percentages, labels = labels, main = "Distribution of Strikes by Position")
  })
}

# Run the Shiny app
shinyApp(ui = ui, server = server)

```
